# 암호화폐 가격 조회 사이트  

**개발 기간**: 2024.07 ~ 현재  
**배포 주소**: [kimpviewer.com](http://kimpviewer.com)  

---

## 기획 배경  
국내 거래소와 해외 거래소 간의 시세 차익은 흔히 '한국 프리미엄'으로 불리며, 이는 암호화폐 투자 결정에 있어 중요한 지표입니다. 사용자가 이러한 데이터를 한눈에 파악하고 투자 결정을 도울 수 있도록 정보를 제공하기 위해 본 사이트를 개발했습니다.  

---

## 주요 기능  
- 실시간 원/달러 환율 조회
- 실시간 국내 거래소(업비트) 가격 조회
- 실시간 해외 선물 거래소(바이비트) 가격 조회
- 국내 거래소 - 해외 선물 거래소 간 시세 차익 계산 및 표시  
- 북마크, 정렬, 검색 기능을 통한 신속한 암호화폐 데이터 확인
- 실시간 채팅 기능으로 사용자 간 소통 가능

---

## 사용 기술  
-  JavaScript, React, Node.js, Express, Socket.IO, MongoDB(Mongoose), CloudType

---

## 기술적 이슈와 해결 방안  

### 1. 해외 거래소 데이터 렌더링 속도 개선  

- **문제** : 물리적 거리 문제로 해외에서 국내로 응답받는 데이터 지연 문제 **(20초)**
- **해결책** :  
    - 서버에서 국내/해외 거래소 데이터를 저장 후 클라이언트 접속 시 즉시 렌더링하도록 구현  
- **성과** :  
    - 응답시간 평균 20초 → 0.3초로 약 **98% 성능 개선**  


### 2. 이미지 용량 최적화 통해 네트워크 트래픽 최소화

- **문제** : 외부 리소스 이미지가 최적화되지 않은 PNG 포맷으로 제공되며 파일 크기가 크고 별도의 압축 없이
             전송되어 불필요한 네트워크 증가 및 서버 리소스 낭비 문제 발생
- **기술 스택 선택 배경** :
  - `sharp` (이미지 변환 라이브러리): 서버에서 이미지를 WebP로 변환하여 파일 크기를 줄이고 전송량을 절감
  - WebP 포맷: PNG 대비 최대 약 70 ~ 90% 용량 절감, 웹 최적화에 유리
  - 서버 캐싱 (Express + fs): 변환된 이미지를 서버에 저장하여 반복 요청 시 재사용, 트래픽 절감
- **해결책**:  
  1) 이미지 최적화 적용
    - PNG 이미지를 WebP 포맷으로 변환 (최대 96% 용량 절감)
    - 불필요하게 큰 이미지를 64x64로 리사이징하여 최소한의 크기만 전송
  2) 서버 캐싱 적용
    - 변환된 이미지를 **서버에 저장**하여 반복 다운로드 없이 빠르게 제공
    - 최적화된 이미지를 정적 파일로 제공하여 서버 부하 감소
- **성과**: 
  - **이미지 총용량** : **6.3MB** → **248KB**로 최적화 (**96% 전송량 절감**)
  - **전송량** : **6.2MB** -> **589KB**
  - **리소스** : **6.3MB** -> **692KB**

### 3. 달러 환율 데이터 업데이트 주기 개선  

- **문제** : API의 하루 1회 업데이트 한계로 인해 정확한 정보 제공 불가  
- **해결책** :  
  - 원/달러 환율 API 데이터 로직을 개선하여 3분마다 환율 데이터를 업데이트하는 로직 구현  
- **성과** :  
  - 환율 업데이트 주기 24시간 → 3분으로 단축하여 정확한 정보 제공  

### 4. 데이터 테이블 구현 과정에서의 기술 변경  

- **문제 1** : 실시간 정렬이 되지 않는 버그
    - **해결책** :  `jQuery DataTables` 라이브러리를 사용하여 실시간 정렬 기능 구현  
    - **기술 스택 선택 배경** :  간편한 로직 구현으로 빠르게 정렬 문제 해결 가능  
    - **성과** : 적은 코드로 실시간으로 변하는 데이터를 정렬 가능  

- **문제 2** : `jQuery DataTables` 사용 시 빈번한 렌더링으로 메모리 초과 발생
    - **해결책** : `React`로 전환하여 Virtual DOM 활용, 상태를 통해 변경된 데이터만 업데이트되도록 구현  
    - **기술 스택 선택 배경** : Virtual DOM을 활용한 효율적인 렌더링과 컴포넌트 기반 구조로 유지 보수성과 성능을 동시에 개선하기 위함  
    - **성과** : 웹 브라우저 메모리 사용량을 **200MB ~ 250MB 수준으로 안정화**, DOM 조작 최적화로 성능 향상  

### 5. useEffect의 무한 재렌더링 문제  

- **문제** : `useEffect`의 의존성 배열로 인해 무한 재실행 발생  
- **해결책**:  
  - 의존성 배열에 꼭 필요한 값만 포함  
  - 이전 데이터와 새 데이터를 비교해 상태 변경 시에만 업데이트  
  - `useMemo`를 활용하여 북마크, 정렬, 검색 데이터를 캐싱  
- **성과**:  
  - 불필요한 상태 업데이트 제거로 성능 최적화  
  - 무한 재렌더링 문제 해결 및 안정적인 렌더링 성능 확보  
---

